---
sidebar_class_name: tabbed-page
hide_title: true
slug: api
title: API
pagination_next: guides/playback-a-video-stream
---

import Tabs from "./_tabs.mdx";
import CodeBlock from "@theme/CodeBlock";
import CodeBlockTabs from "@site/src/components/CodeBlockTabs";
import CodeBlockTabItem from "@site/src/components/CodeBlockTabItem";

<Tabs />

The Livepeer API allows you to send video files to Livepeer and get them ready
for optimized playback. Videos can be provided either by you (static content) or
your users, given your application offers an interface for them to do so.

## Step 1: Configure your player

To display viewership data, you need to configure your player first.
We recommend using the [Livepeer player](https://livepeerjs.org/) as the player
is already configured. You can follow this [guide](guides/playback-a-video-stream) to
setup the Livepeer player.

## Step 2: Get the `playbackId` of an existing asset

Get the `playbackId` of an existing asset. An asset's `playbackId` can be found by making 
an API request using a `stream.id` or `asset.id`. You can find the `playbackId` in the response object of the 
[asset](https://docs.livepeer.studio/reference/api/get-assets#response-example) request.

If you haven't created an asset yet, follow the 
[upload a video asset guide](/guides/on-demand/upload-video-asset#api) to do so.

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
const response = await fetch("https://livepeer.studio/api/asset/{id}", {
    method: "GET",
    headers: {
        Authorization: `Bearer ${process.env.API_TOKEN}`,
        "Content-Type": "application/json",
    },
});

const { playbackId } = await response.json();
```

</CodeBlockTabItem>
<CodeBlockTabItem value="curl" label="curl">

```bash
curl --location --request GET 'https://livepeer.studio/api/asset/{id}' \
--header 'Authorization: Bearer $API_TOKEN'
```

</CodeBlockTabItem>
</CodeBlockTabs>

## Step 3: Retrieve viewership data

Once you have the `playbackId`, you can make a request to get the viewership data.

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
const getViews = await fetch("https://livepeer.studio/api/data/views/{playbackId}/total", {
    method: "GET",
    headers: {
        "Content-Type": "application/json",
    },
});
```

</CodeBlockTabItem>
<CodeBlockTabItem value="curl" label="curl">

```bash
curl --location --request GET https://livepeer.studio/api/data/views/{playbackId}/total
```

</CodeBlockTabItem>
</CodeBlockTabs>

## Livepeer player alternative

If you are using a HTML5 video player, you will need to include the plugin code 
within the player code. You can check out the full example [here](https://github.com/0xcadams/livepeer-player-demo).

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
import { createNewHls, isHlsSupported } from 'livepeer';
import * as React from 'react';

export function VideoPlayer({
  hlsConfig,
  playerRef = React.createRef(),
  src,
  width = '100%',
  autoPlay = true,
  ...props
}) {
  React.useEffect(() => {
    if (playerRef.current && typeof window !== 'undefined' && isHlsSupported()) {
      const { destroy } = createNewHls(src, playerRef.current, {...hlsConfig,});

      return () => {
        destroy();
      };
    }
  }, [autoPlay, hlsConfig, playerRef, src]);

  // if Media Source is supported, use HLS.js to play video
  if (typeof window !== 'undefined' && isHlsSupported())
    return (
      <video
        aria-label="video-player"
        role="video"
        ref={playerRef}
        width={width}
        controls
        {...props}
      />
    );

  // fallback to using a regular video player if HLS is supported by default in the user's browser
  return (
    <video
      aria-label="video-player"
      role="video"
      ref={playerRef}
      src={src}
      autoPlay={autoPlay}
      width={width}
      controls
      {...props}
    />
  );
}
```

</CodeBlockTabItem>
</CodeBlockTabs>
