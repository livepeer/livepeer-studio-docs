import TabbedPages from "@site/src/components/TabbedPages";
import CodeBlock from "@theme/CodeBlock";
import CodeBlockTabs from "@site/src/components/CodeBlockTabs";
import CodeBlockTabItem from "@site/src/components/CodeBlockTabItem";

<head>
  <title>Get viewer engagement | Livepeer Studio Docs</title>
  <meta
    property="og:title"
    content="Get viewer engagement | Livepeer Studio Docs"
  />
</head>

# Get viewer engagement

This guide provides information about registering and retrieving views from a
video using the [dashboard](./dashboard) or the [Livepeer API](./api).

## Register viewership metrics

To collect and register viewership metrics, you first need to configure your player.
It is not required but we recommend that you use the [Livepeer player](https://livepeerjs.org/react/Player)
to get viewership metrics, as it comes fully configured for the best playback experience with Livepeer.
You can follow [this guide](/guides/playback-a-video-stream) to set it up.

We also support viewership data using custom players. Here's how to configure one to register
viewership metrics as well:

Here's how to configure a custom player:

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
import { addMediaMetrics } from 'livepeer'

const source =
  'https://livepeercdn.com/recordings/bd600224-d93a-4ddc-a6ac-2d71e3c36768/index.m3u8'
const video = document.getElementById('my-video')

// setup your player before calling addMediaMetrics

addMediaMetrics(video, source, (e) => console.error('Error adding metrics', e))
```

</CodeBlockTabItem>
<CodeBlockTabItem value="React" label="React">

```js
import { addMediaMetrics } from 'livepeer'
import React, { useEffect, useRef, useState } from 'react'

export default function VideoPlayer() {
  const videoRef = useRef(null)
  const [source, setSource] = useState(
    'https://livepeercdn.com/recordings/bd600224-d93a-4ddc-a6ac-2d71e3c36768/index.m3u8'
  )

  useEffect(() => {
    if (videoRef.current) {
      // set up other stuff in your player before calling addMediaMetrics
      const metrics = addMediaMetrics(videoRef.current, source, (e) =>
        console.error('Error adding metrics', e)
      )
      return metrics?.destroy
    }
  }, [videoRef, source])

  return (
    <video
      controls
      ref={videoRef}
      src={source}
      style={{ width: '100%', maxWidth: '500px' }}
    />
  )
}
```

</CodeBlockTabItem>
</CodeBlockTabs>

<TabbedPages
  pages={[
    { slug: "dashboard", title: "Dashboard" },
    { slug: "api", title: "API" },
  ]}
/>
