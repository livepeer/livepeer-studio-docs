---
sidebar_class_name: tabbed-page
hide_title: true
slug: api
title: API
---

import Tabs from "./_tabs.mdx";
import CodeBlock from "@theme/CodeBlock";
import CodeBlockTabs from "@site/src/components/CodeBlockTabs";
import CodeBlockTabItem from "@site/src/components/CodeBlockTabItem";

<Tabs />

The Livepeer API allows you to send video files to Livepeer and get them ready
for optimized playback. Videos can be provided either by you (static content) or
your users, given your application offers an interface for them to do so.

You can [upload via URL](#uploading-via-url), [upload locally](#uploading-locally) or by [resumable upload](#resumable-upload).

## Caveats

- Files are currently limited to 1GB in size. Any files greater than that will
  likely error out during the upload or processing steps.
- Only MP4 files encoded with H.264 and AAC are supported

## Uploading via URL

When using the upload via URL method:

- Provide the name of the asset
- Provide the URL of the asset that should be imported

### Step 1: Upload asset by URL

To upload the asset to the Livepeer network, you'll need to make a POST request
and include the URL of the asset to be uploaded.

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
const uploadAssetURL = await fetch("https://livepeer.studio/api/asset/import", {
    method: "POST",
    headers: {
        Authorization: `Bearer ${process.env.API_TOKEN}`,
        "Content-Type": "application/json",
    },
    data: JSON.stringify({
        url: "$EXTERNAL_URL"
        name: "Example name",
    }),
});
```

</CodeBlockTabItem>
<CodeBlockTabItem value="curl" label="curl">

```bash
curl --location --request POST 'https://livepeer.studio/api/asset/import' \
--header 'Authorization: Bearer $API_TOKEN' \
--header 'Content-Type: application/json' \
--data-raw '{
    "url":"$EXTERNAL_URL",
    "name":"Example name"
}'
```

</CodeBlockTabItem>
</CodeBlockTabs>

### Step 2: Check the upload status

After uploading your asset, get the `asset.id` from the
[response object](/reference/api/create-asset-with-url#response) of the POST
request. The `asset.id` represents the status of your upload.

When `asset.status: "ready"` is returned in the response, the asset has finished
uploading and will be ready for playback. If `asset.status: "waiting"` is
returned in the response, the asset is not available yet and you should make the
API call again until `asset.status: "ready"`.

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
const getAsset = await fetch("https://livepeer.studio/api/asset/{id}", {
  method: "GET",
  headers: {
    Authorization: `Bearer ${process.env.API_TOKEN}`,
    "Content-Type": "application/json",
  },
});
```

</CodeBlockTabItem>
<CodeBlockTabItem value="curl" label="curl">

```bash
curl --location --request GET 'https://livepeer.studio/api/asset/{id}' \
--header 'Authorization: Bearer $API_TOKEN'
```

</CodeBlockTabItem>
</CodeBlockTabs>

## Uploading Locally

### Step 1: Generate upload URL

To upload the asset to the Livepeer network locally, you'll need to make a POST
request to generate an upload URL.

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
const uploadAsset = await fetch(
  "https://livepeer.studio/api/asset/request-upload",
  {
    method: "POST",
    headers: {
      Authorization: `Bearer ${process.env.API_TOKEN}`,
      "Content-Type": "application/json",
    },
    data: JSON.stringify({
      name: "Example name",
    }),
  }
);
```

</CodeBlockTabItem>
<CodeBlockTabItem value="curl" label="curl">

```bash
curl --location --request POST 'https://livepeer.studio/api/asset/request-upload' \
--header 'Authorization: Bearer $API_TOKEN' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name":"Example name"
}'
```

</CodeBlockTabItem>
</CodeBlockTabs>

### Step 2: Upload your video to the URL

Get the `"url": "https://origin.livepeer.studio/api/assets/â€¦"` from the
[response object](/reference/api/create-asset#response-example). Using the URL
generated, upload your video with a PUT request.

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
const uploadAsset = await fetch("${url}", {
    method: "PUT",
    headers: {
        Authorization: `Bearer ${process.env.LP_API_KEY}`
        "Content-Type": "video/mp4"
    },
    data: fs.createReadStream(path)
});
```

</CodeBlockTabItem>
<CodeBlockTabItem value="curl" label="curl">

```bash
curl --location --request PUT "${url}" \
--header 'Content-Type: video/mp4' \
--data-binary '@$VIDEO_FILE_PATH'
```

</CodeBlockTabItem>
</CodeBlockTabs>

### Step 3: Check the upload status

After uploading your asset, get the `asset.id` from the
[response object](/reference/api/create-asset-with-url#response) of the POST
request. The `asset.id` represents the status of your upload.

When `asset.status: "ready"` is returned in the response, the asset has finished
uploading and will be ready for playback. If `asset.status: "waiting"` is
returned in the response, the asset is not available yet and you should make the
API call again until `asset.status: "ready"`.

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
const getAsset = await fetch("https://livepeer.studio/api/asset/{id}", {
  method: "GET",
  headers: {
    Authorization: `Bearer ${process.env.LP_API_KEY}`,
  },
});
```

</CodeBlockTabItem>
<CodeBlockTabItem value="curl" label="curl">

```bash
curl --location --request GET 'https://livepeer.studio/api/asset/{id}' \
--header 'Authorization: Bearer $API_TOKEN'
```

</CodeBlockTabItem>
</CodeBlockTabs>

## Resumable Upload

The resumable upload method allows a user to resume their upload if their 
connection fails due to a cancelled request or a dropped connection. If you're
uploading a large file and you lose connection at 98%, you don't have to restart
from the beginning, you can continue back at 98%.

### Step 1: Generate upload URL

To upload the asset to the Livepeer network locally, you'll need to make a POST
request to generate an upload URL.

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
const uploadAsset = await fetch(
  "https://livepeer.studio/api/asset/request-upload",
  {
    method: "POST",
    headers: {
      Authorization: `Bearer ${process.env.API_TOKEN}`,
      "Content-Type": "application/json",
    },
    data: JSON.stringify({
      name: "Example name",
    }),
  }
);
```

</CodeBlockTabItem>
<CodeBlockTabItem value="curl" label="curl">

```bash
curl --location --request POST 'https://livepeer.studio/api/asset/request-upload' \
--header 'Authorization: Bearer $API_TOKEN' \
--header 'Content-Type: application/json' \
--data-raw '{
    "name":"Example name"
}'
```

</CodeBlockTabItem>
</CodeBlockTabs>

### Step 2: Upload your resumable video via Tus

Livepeer Studio supports resumable uploads via [Tus](https://tus.io/). This section provides a simple 
example of how to use `tus-js-client` to upload a video file.

You should use the `tusEndpoint` field of the [response object](/reference/api/create-asset#response-example) 
to upload the video file and track the progress:

<CodeBlockTabs>
<CodeBlockTabItem value="JavaScript" label="JavaScript">

```js
//  This assumes there is an `input` element of `type="file"` with id `fileInput` in the HTML
const input = document.getElementById("fileInput");
const file = input.files[0];
const upload = new tus.Upload(file, {
  endpoint: tusEndpoint, // URL from `tusEndpoint` field in the `/request-upload` response
  metadata: {
    filename,
    filetype: "video/mp4",
  },
  uploadSize: file.size,
  onError(err) {
    console.error("Error uploading file:", err);
  },
  onProgress(bytesUploaded, bytesTotal) {
    const percentage = ((bytesUploaded / bytesTotal) * 100).toFixed(2);
    console.log("Uploaded " + percentage + "%");
  },
  onSuccess() {
    console.log("Upload finished:", upload.url);
  },
});
const previousUploads = await upload.findPreviousUploads();
if (previousUploads.length > 0) {
  upload.resumeFromPreviousUpload(previousUploads[0]);
}
upload.start();
```

</CodeBlockTabItem>
</CodeBlockTabs>


> **Note:** If you are using `tus` from `node.js`, you need to add a custom URL
> storage to enable resuming from previous uploads. On the browser, this is
> enabled by default using local storage. In `node.js`, add
> `urlStorage: new tus.FileUrlStorage("path/to/tmp/file")`, to the `UploadFile`
> object definition above.


