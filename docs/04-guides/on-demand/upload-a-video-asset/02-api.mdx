---
sidebar_class_name: tabbed-page
hide_title: true
slug: api
title: API
---

import Tabs from "./_tabs.mdx";
import CodeBlock from "@theme/CodeBlock";
import CodeBlockTabs from "@site/src/components/CodeBlockTabs";
import CodeBlockTabItem from "@site/src/components/CodeBlockTabItem";

<Tabs />

The Video-on-Demand (VOD) API allows you to send video files to Livepeer and get
them ready for optimized playback. Those videos can be provided either by you
(static content) or your users, given your application offers an interface for
them to do so.

## Technical Preparation

Before getting started, you will need to meet the following dependencies for
working with the On Demand feature:

- [A Livepeer Studio account](https://livepeer.studio/login)
- Install [Node.js](https://nodejs.org/en/)
- Access to the [API Reference](https://docs.livepeer.studio/references)
- An [API Key](https://docs.livepeer.studio/guides/livestreaming/api-key) to
  call the VOD API
  - Note: Calling the API from the frontend requires an API key with CORS access
    allowed

## Caveats

- Files are currently limited to 1GB in size. Any files greater than that will
  likely error out during the upload or processing steps.
- Only MP4 files encoded with H.264 and AAC are supported

## Uploading via URL

When using the upload via URL method:

- Provide the name of the asset
- Provide the URL of the asset that should be imported

### Step 1: Upload asset by URL

To upload the asset to the Livepeer network, you'll need to make a POST request
and include the URL of the asset to be uploaded.

<CodeBlockTabs>
<CodeBlockTabItem value="javascript" label="Javascript">

```js
const uploadAssetURL = await fetch("https://livepeer.studio/api/asset/import", {
    method: "POST",
    headers: {
        Authorization: `Bearer ${process.env.LP_API_KEY}`,
        "Content-Type": "application/json",
    },
    data: JSON.stringify({
        url: "$EXTERNAL_URL"
        name: "Example name",
    }),
});
```

</CodeBlockTabItem>
</CodeBlockTabs>

### Step 2: Check the upload status

After uploading your asset, get the `asset.id` from the
[response object](/reference/api/create-asset-with-url#response) of the POST
request. The `asset.id` represents the status of your upload. When
`asset.status == "ready"` that means the asset has finished uploading and will
be ready for playback.

<CodeBlockTabs>
<CodeBlockTabItem value="javascript" label="Javascript">

```js
const getAsset = await fetch("https://livepeer.studio/api/task/$ASSET_ID", {
    method: "GET",
    headers: {
        Authorization: `Bearer ${process.env.LP_API_KEY}`,
        "Content-Type": "application/json",
    },
});
```

</CodeBlockTabItem>
</CodeBlockTabs>

## Uploading Locally

### Step 1: Generate upload URL

To upload the asset to the Livepeer network locally, you'll need to make a POST
request to generate an upload URL.

<CodeBlockTabs>
<CodeBlockTabItem value="javascript" label="Javascript">

```js
const uploadAsset = await fetch("https://livepeer.studio/api/asset/request-upload", {
    method: "POST",
    headers: {
        Authorization: `Bearer ${process.env.LP_API_KEY}`,
        "Content-Type": "application/json",
    },
    data: JSON.stringify({
        name: "Example name",
    }),
});
```

</CodeBlockTabItem>
</CodeBlockTabs>

### Step 2: Upload your video to the URL

Get the `"url": "https://origin.livepeer.studio/api/assets/â€¦"` from the
[response object](/reference/api/create-asset#response-example). Using the URL
generated, upload your video with a PUT request.

<CodeBlockTabs>
<CodeBlockTabItem value="javascript" label="Javascript">

```js
const uploadAsset = await fetch("${url}", {
    method: "PUT",
    headers: {
        Authorization: `Bearer ${process.env.LP_API_KEY}`
        "Content-Type": "video/mp4"
    },
    data: fs.createReadStream(path)
});
```

</CodeBlockTabItem>
</CodeBlockTabs>

### Step 3: Check the upload status

After uploading your asset, get the `asset.id` from the
[response object](/reference/api/create-asset-with-url#response) of the POST
request. The `asset.id` represents the status of your upload. When
`asset.status == "ready"` that means the asset has finished uploading and will
be ready for playback.

<CodeBlockTabs>
<CodeBlockTabItem value="javascript" label="Javascript">

```js
const getAsset = await fetch("https://livepeer.studio/api/task/$ASSET_ID", {
    method: "GET",
    headers: {
        Authorization: `Bearer ${process.env.LP_API_KEY}`,
    },
});
```

</CodeBlockTabItem>
</CodeBlockTabs>
